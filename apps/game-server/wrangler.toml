name = "game-server"
main = "src/server.ts"
compatibility_date = "2024-02-07"
compatibility_flags = ["nodejs_compat"]

# PartyServer requires a Durable Object binding
[[durable_objects.bindings]]
name = "GameServer"
class_name = "GameServer"

# Migrations for DO state (required for new DO classes)
[[migrations]]
tag = "v1"
new_sqlite_classes = ["GameServer"]

# D1 Database Binding (for Journal)
[[d1_databases]]
binding = "DB"
database_name = "pecking-order-journal-db"
database_id = "c5941589-2d69-4ae1-9b5d-0554f2ad9721"

[observability]
enabled = true

# Axiom Secrets (Logging)
[vars]
AXIOM_DATASET = "pecking-order"
VAPID_PUBLIC_KEY = "BDCbn388daKAMq3g1PyJ5nqfi3btLvsjIFllFkwN4S_hgoXwLBWI0JYY9XMTXhXyX-fEqPDfZKoP0EJ9hNM1OzQ"
GAME_CLIENT_HOST = "https://pecking-order-client.pages.dev"
# AXIOM_TOKEN, AXIOM_ORG_ID, AUTH_SECRET, and VAPID_PRIVATE_JWK must be set via `wrangler secret put`
