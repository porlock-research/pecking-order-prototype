name = "game-server"
main = "src/server.ts"
compatibility_date = "2024-02-07"
compatibility_flags = ["nodejs_compat"]

# PartyServer requires a Durable Object binding
[[durable_objects.bindings]]
name = "GameServer"
class_name = "GameServer"

# Migrations for DO state (required for new DO classes)
[[migrations]]
tag = "v1"
new_sqlite_classes = ["GameServer"]

# D1 Database Binding (for Journal)
[[d1_databases]]
binding = "DB"
database_name = "pecking-order-journal-db"
database_id = "c5941589-2d69-4ae1-9b5d-0554f2ad9721"

# Axiom Secrets (Logging)
[vars]
AXIOM_DATASET = "pecking-order"
# AXIOM_TOKEN, AXIOM_ORG_ID, and AUTH_SECRET must be set via `wrangler secret put`
